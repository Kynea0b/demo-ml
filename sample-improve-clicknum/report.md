# デザインの組み合わせとクリック数の関係

広告デザインの組み合わせに対して、何回クリックしたかのデータを使用して、どのデザインが最適なのかを知りたいとします。
データの性質を調べながら、モデルの妥当性を吟味しつつ、デザインの改善案を調べます。

広告デザインはいくつかの組み合わせでディスプレイに表示されます。
今回はd1からd12までの広告デザインがあるとします。

data

```csv
d1,d2,d3,d4,d5,d6,d7,d8,d9,d10,d11,d12,click
0,1,1,1,0,1,0,1,0,1,0,1,175
```

- 説明変数;
  表示される:1 表示されない:0
- 目的変数;
  クリック回数

今回は、ポアソン回帰と負の二項回帰、SVMで調べます。

# 一般化線形モデル

## ポアソン回帰

クリック数は、典型的なカウントデータです。このため、セオリー通り、ポアソン回帰で分析してみます。

交互作用を気にせず、各変数 $\{d_1,d_2, \cdots , d_12 \}$ は独立であると仮定し、ステップワイズ法を使用して、説明変数を選択して性能を見てみます。
Estimateが正の値はクリック数増、負の値はクリック数減に寄与しているとみることができます。
次の結果が以下のモデル性能の出力からは言えそうです。

クリック数増; デザイン要素 $\{d_1, d_3, d_9\}$
クリック数減; デザイン要素 $\{d_2, d_10\}$

```
> summary(step.p_model)

Call:
glm(formula = click ~ d1 + d2 + d3 + d5 + d6 + d7 + d8 + d9 + 
    d10 + d11 + d12, family = poisson, data = dat1)

Coefficients:
             Estimate Std. Error z value Pr(>|z|)    
(Intercept)  6.413185   0.020914 306.643  < 2e-16 ***
d1           0.736299   0.011281  65.271  < 2e-16 ***
d2          -0.120217   0.009867 -12.183  < 2e-16 ***
d3           0.200392   0.009528  21.032  < 2e-16 ***
d5          -0.059299   0.009187  -6.455 1.08e-10 ***
d6           0.224234   0.010039  22.336  < 2e-16 ***
d7           0.049432   0.008782   5.629 1.81e-08 ***
d8          -0.016869   0.008549  -1.973   0.0485 *  
d9           0.247561   0.011240  22.026  < 2e-16 ***
d10         -0.189420   0.009656 -19.616  < 2e-16 ***
d11         -0.078933   0.009865  -8.002 1.23e-15 ***
d12         -0.087681   0.008344 -10.509  < 2e-16 ***
---
Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1

(Dispersion parameter for poisson family taken to be 1)

    Null deviance: 21668.7  on 69  degrees of freedom
Residual deviance:  8720.6  on 58  degrees of freedom
AIC: 9348.9
```




ここで、平均と分散を調べてみます。データの性質として、平均と分散が同じ程度の時、ポアソン回帰に適したデータです。

目的変数である、click列の平均と分散を調べます。

```
> mean(dat1[,13])
[1] 1067.5
> var(dat1[,13])
[1] 309571.6
```

平均値が、`1067.5`、分散値が`309571.6`で、分散値が平均値に比べて大幅に大きいことがわかります。
ですから、この場合は、負の二項分布を使用して、回帰分析した方が良さそうです。

## 負の二項回帰

todo write

### ポアソン回帰と負の二項回帰を比較

残差をプロットして、ポアソン回帰と負の二項回帰を比較すると、ポアソン回帰でより残差が広がっていることがわかります。
<img src="https://github.com/user-attachments/assets/9ed56f0d-b531-4624-ba0f-4ebf2814cdfc" width="400">
<img src="https://github.com/user-attachments/assets/75b275bd-7e3b-4693-b916-162e42dc959a" width="400">




### 尤度比検定

todo write
検定をして、2つの回帰モデルの適合度に統計的に有意な差があるかどうかを判断

## ランダムフォレスト回帰

## SVR



todo write
